---
title:  "[Unity ê°•ì˜] ë±€ì„œë¼ì´í¬ ê°•ì˜ - UI ê°œì„  "
excerpt: ""

categories:
    - Class VamSurLike
tags:
    - [C#, Unity, VamSurLike]

toc: true
toc_sticky: true
 
date: 2025-03-31 05:00

---
- - -


<br>
- - - 

<!--&nbsp;ğŸ”¹ âœ” âœ…  -->

# 1. UI ê°œì„ 
âœ” UIì‘ì—… - ì‹œê°„ì´ ë§ì´ ë“ ë‹¤. -> ìë™í™”  
âœ” UI ì½”ë“œ ì¶”ê°€  
âœ” ê²Œì„ ê²°ê³¼ íŒì—…ì°½  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info}  

<br><br><br><br>

# 2. ì½”ë“œ
ğŸ”¹ UI_Base - ë³€ê²½í•  UIë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬  
ğŸ”¹ UI_EventHandler - Targetì„ í–¥í•´ X ì´ˆ ì›€ì§ì´ëŠ” ì½”ë“œ  
ğŸ”¹ UI_GameResultPopup - Targetì„ í–¥í•´ ëŒì§„   
ğŸ”¹ Define - UIEvenet(Click, Drag ë“± íƒ€ì…)  
ğŸ”¹ Extension - BindEvent (Buttonì˜ GameObjectì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” BindEvent() í™•ì¥ ë©”ì„œë“œë¥¼ ì¶”ê°€)  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info}

## UI_Base
âœ… Dictionary(_objects)ì‚¬ìš©, ì‚¬ìš©í•  Type(text,Button,~~)ë¡œ ì¢…ë¥˜ë³„ë¡œ []ë¡œ ê´€ë¦¬  
âœ… Bind - UIì½”ë“œì—ì„œ Enumìœ¼ë¡œ ë¶„ë¥˜ëœ UIì´ë¦„ìœ¼ë¡œ ëœ ì •ë³´ë¥¼ ê°€ì ¸ì™€ _objectsì— FindChildë¥¼ ì´ìš©í•´ ì°¾ì•„ì„œ ì¶”ê°€í•œë‹¤.  
âœ… Get - ì–´ë–¤ UIë¥¼ ë³€ê²½í•˜ê³ ì í•  ë•Œ ê·¸ UIë¥¼ _objectsì—ì„œ ê°€ì ¸ì˜¨ë‹¤.  
âœ… BindEvent - EventHandlerë¥¼ í†µí•´ Onclick, dragë“± ì´ë²¤íŠ¸ë¥¼ ì ìš©í•œë‹¤.  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info} 
<details>
<summary>UI_Base</summary>
<div class="notice--primary" markdown="1"> 

```c# 
using System;
using System.Collections;
using System.Collections.Generic;
using TMPro;
using Unity.VisualScripting;
using UnityEngine;
using UnityEngine.EventSystems;
using UnityEngine.UI;

public abstract class UI_Base : MonoBehaviour
{
    protected Dictionary<Type, UnityEngine.Object[]> _objects = new Dictionary<Type, UnityEngine.Object[]>();
    protected bool _init = false;

    public virtual bool Init()
    {
        if (_init)
            return false;

        _init = true;
        return true;
    }

    private void Start()
    {
        Init();
    }

    protected void Bind<T>(Type type) where T : UnityEngine.Object
    {
        string[] names = Enum.GetNames(type);
        UnityEngine.Object[] objects = new UnityEngine.Object[names.Length];
        _objects.Add(typeof(T), objects);

        for (int i = 0; i < names.Length; i++)
        {
            if (typeof(T) == typeof(GameObject))
                objects[i] = Utils.FindChild(gameObject, names[i], true);
            else
                objects[i] = Utils.FindChild<T>(gameObject, names[i], true);

            if (objects[i] == null)
                Debug.Log($"Failed to bind({names[i]})");
        }
    }

    protected void BindObject(Type type) { Bind<GameObject>(type); }
    protected void BindImage(Type type) { Bind<Image>(type); }
    protected void BindText(Type type) { Bind<TMP_Text>(type); }
    protected void BindButton(Type type) { Bind<Button>(type); }
    protected void BindToggle(Type type) { Bind<Toggle>(type); }


    protected T Get<T>(int idx) where T : UnityEngine.Object
    {
        UnityEngine.Object[] objects = null;
        if (_objects.TryGetValue(typeof(T), out objects) == false)
            return null;

        return objects[idx] as T;
    }

    protected GameObject GetObject(int idx) { return Get<GameObject>(idx); }
    protected TMP_Text GetText(int idx) { return Get<TMP_Text>(idx); }
    protected Button GetButton(int idx) { return Get<Button>(idx); }
    protected Image GetImage(int idx) { return Get<Image>(idx); }
    protected Toggle GetToggle(int idx) { return Get<Toggle>(idx); }

    public static void BindEvent(GameObject go, Action action = null, Action<BaseEventData> dragAction = null, UIEvent type = UIEvent.Click)
    {
        UI_EventHandler evt = Utils.GetOrAddComponent<UI_EventHandler>(go);

        switch (type)
        {
            case UIEvent.Click:
                evt.OnClickHandler -= action;
                evt.OnClickHandler += action;
                break;
            case UIEvent.Pressed:
                evt.OnPressedHandler -= action;
                evt.OnPressedHandler += action;
                break;
            case UIEvent.PointerDown:
                evt.OnPointerDownHandler -= action;
                evt.OnPointerDownHandler += action;
                break;
            case UIEvent.PointerUp:
                evt.OnPointerUpHandler -= action;
                evt.OnPointerUpHandler += action;
                break;
            case UIEvent.Drag:
                evt.OnDragHandler -= dragAction;
                evt.OnDragHandler += dragAction;
                break;
            case UIEvent.BeginDrag:
                evt.OnBeginDragHandler -= dragAction;
                evt.OnBeginDragHandler += dragAction;
                break;
            case UIEvent.EndDrag:
                evt.OnEndDragHandler -= dragAction;
                evt.OnEndDragHandler += dragAction;
                break;
        }
    }
}
```
</div>
</details>

<br>

## UI_EventHandler
âœ… í•´ë‹¹í•˜ëŠ” í–‰ë™ì— êµ¬ë…ëœ ë©”ì„œë“œë¥¼ ì‹¤í–‰  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info} 
<details>
<summary>UI_EventHandler</summary>
<div class="notice--primary" markdown="1"> 

```c# 
public class UI_EventHandler : MonoBehaviour, IPointerClickHandler, IPointerDownHandler, IPointerUpHandler, IDragHandler, IBeginDragHandler, IEndDragHandler
{
    public Action OnClickHandler = null;
    public Action OnPressedHandler = null;
    public Action OnPointerDownHandler = null;
    public Action OnPointerUpHandler = null;
    public Action<BaseEventData> OnDragHandler = null;
    public Action<BaseEventData> OnBeginDragHandler = null;
    public Action<BaseEventData> OnEndDragHandler = null;

    bool _pressed = false;

    private void Update()
    {
        if (_pressed)
            OnPressedHandler?.Invoke();
    }

    public void OnPointerClick(PointerEventData eventData)
    {
        if (OnClickHandler != null)
            OnClickHandler.Invoke();
    }

    public void OnPointerDown(PointerEventData eventData)
    {
        _pressed = true;
        OnPointerDownHandler?.Invoke();

    }

    public void OnPointerUp(PointerEventData eventData)
    {
        _pressed = true;
        OnPointerUpHandler?.Invoke();
    }

    public void OnDrag(PointerEventData eventData)
    {
        _pressed = true;
        OnDragHandler?.Invoke(eventData);
    }

    public void OnBeginDrag(PointerEventData eventData)
    {
        OnBeginDragHandler?.Invoke(eventData);
    }

    public void OnEndDrag(PointerEventData eventData)
    {
        OnEndDragHandler?.Invoke(eventData);
    }
}
```
</div>
</details>

<br>

## UI_GameResultPopup
âœ” ê²Œì„ ê²°ê³¼ íŒì—…ì°½  
âœ… Enum ìˆ˜ì •ì´ í•„ìš”í•œ UIë“¤ì„ Tpye(Text,Button ~~)ë³„ë¡œ êµ¬ë¶„í•´ì„œ UIì´ë¦„ê³¼ ê°™ê²Œ ì„¤ì •  
âœ… init - Bind() Typeë³„ë¡œ UI_Base-Dictionary(_object)ì— ë‹´ì•„ì„œ ê´€ë¦¬  
âœ… init - GetButton().BindEvent - ë²„íŠ¼ì— OnClickButton ì´ë²¤íŠ¸ ì¶”ê°€  
âœ… RefreshUI - UIì •ë³´ ê°±ì‹   
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info} 
<details>
<summary>UI_GameResultPopup</summary>
<div class="notice--primary" markdown="1"> 

```c# 
using System.Collections;
using System.Collections.Generic;
using Unity.VisualScripting;
using UnityEngine;
using UnityEngine.UI;

public class UI_GameResultPopup : UI_Base
{
    #region UI ê¸°ëŠ¥ ë¦¬ìŠ¤íŠ¸
    // ì •ë³´ ê°±ì‹ 
    // ResultStageValueText : í•´ë‹¹ ìŠ¤í…Œì´ì§€ ìˆ˜
    // ResultSurvivalTimeValueText : ìŠ¤í…Œì´ì§€ í´ë¦¬ì–´ ê¹Œì§€ ê±¸ë¦° ì‹œê°„ ( mm:ss ë¡œ í‘œê¸°)
    // ResultGoldValueText : ì£½ê¸°ì „ ê¹Œì§€ ì–»ì€ ê³¨ë“œ
    // ResultKillValueText : ì£½ê¸°ì „ ê¹Œì§€ í‚¬ ìˆ˜
    // ResultRewardScrollContentObject : : ë³´ìƒìœ¼ë¡œ ì–»ê²Œë  ì•„ì´í…œì´ ë“¤ì–´ê°ˆ ë¶€ëª¨ ê°œì²´
    // (ê³¨ë“œ, ê²½í—Œì¹˜, ì•„ì´í…œ, ìºë¦­í„° ê°•í™”ì„ ë“±ì„ ë³´ìƒìœ¼ë¡œ)

    // ë¡œì»¬ë¼ì´ì§• í…ìŠ¤íŠ¸
    // GameResultPopupTitleText
    // ResultSurvivalTimeText
    // ConfirmButtonText
    #endregion

    enum GameObjects
    {
        ContentObject,
        ResultRewardScrollContentObject,
        ResultGoldObject,
        ResultKillObject,
    }

    enum Texts
    {
        GameResultPopupTitleText,
        ResultStageValueText,
        ResultSurvivalTimeText,
        ResultSurvivalTimeValueText,
        ResultGoldValueText,
        ResultKillValueText,
        ConfirmButtonText,
    }

    enum Buttons
    {
        StatisticsButton,
        ConfirmButton,
    }

    public override bool Init()
    {
        if (base.Init() == false)
            return false;

        BindObject(typeof(GameObjects));
        BindText(typeof(Texts));
        BindButton(typeof(Buttons));
        
        GetButton((int)Buttons.StatisticsButton).gameObject.BindEvent(OnClickStatisticsButton);
        GetButton((int)Buttons.ConfirmButton).gameObject.BindEvent(OnClickConfirmButton);

        RefreshUI();
        return true;
    }

    public void SetInfo()
    {
        RefreshUI();
    }

    void RefreshUI()
    {
        if (_init == false)
            return;

        // ì •ë³´ ì·¨í•©
        GetText((int)Texts.GameResultPopupTitleText).text = "Game Result";
        GetText((int)Texts.ResultStageValueText).text = "4 STAGE";
        GetText((int)Texts.ResultSurvivalTimeText).text = "Survival Time";
        GetText((int)Texts.ResultSurvivalTimeValueText).text = "14:23";
        GetText((int)Texts.ResultGoldValueText).text = "200";
        GetText((int)Texts.ResultKillValueText).text = "100";
        GetText((int)Texts.ConfirmButtonText).text = "OK";
    }

    void OnClickStatisticsButton()
    {
        Debug.Log("OnClickStatisticsButton");
    }

    void OnClickConfirmButton()
    {
        Debug.Log("OnClickConfirmButton");
    }
}
```
</div>
</details>

<BR>

## Define, Extension
âœ” ë§ˆìš°ìŠ¤ì˜ í–‰ë™ë“¤ Enumìœ¼ë¡œ ì„ ì–¸  
âœ… BindEvent (Buttonì˜ GameObjectì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” BindEvent() í™•ì¥ ë©”ì„œë“œë¥¼ ì¶”ê°€)  
ğŸ”¹ Define - UIEvenet(Click, Drag ë“± íƒ€ì…)  
ğŸ”¹ Extension - BindEvent (Buttonì˜ gameobjectì—BindEvent()í™•ì¥ ë©”ì„œë“œ ì¶”ê°€ )  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info} 
<details>
<summary>Define, Extension</summary>
<div class="notice--primary" markdown="1"> 

```c# 
public enum UIEvent
{
    Click,
    Pressed,
    PointerDown,
    PointerUp,
    Drag,
    BeginDrag,
    EndDrag,
}

public static class Extension
{
    public static void BindEvent(this GameObject go, Action action = null, Action<BaseEventData> dragAction = null, UIEvent type = UIEvent.Click)
    {
        UI_Base.BindEvent(go, action, dragAction, type);
    }
}
```
</div>
</details>

<br><br><br><br>

# ì´ê²ƒì €ê²ƒ ë©”ëª¨

## UI ê´€ë¦¬, UI ì´ë¦„ ë³€ê²½ ì‹œ ìˆ˜ì •  
button, textsë“± enum ì„ ì´ìš©í•´ ì‚¬ìš©í•  ì˜¤ë¸Œì íŠ¸ì˜ nameì„ ë˜‘ê°™ì´ ì„ ì–¸   
uiì´ë¦„ì´ ë³€ê²½ë˜ë©´ ìˆ˜ì • í•„ìš”  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice} 

## UIí…ŒìŠ¤íŠ¸ ì‹œ ì£¼ì˜  
ë²„íŠ¼ í…ŒìŠ¤íŠ¸ ì‹œ RayCast, EventSystem í™•ì¸  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice} 


<br><br><br>
- - - 

# ì¡ë‹´, ì¼ê¸°?
ì´ì „ í”„ë¡œì íŠ¸ì—ì„  ë‹¤ ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ UIë¥¼ ë§Œë“¤ì—ˆì—ˆëŠ”ë°  
ì´ ë°©ë²•ìœ¼ë¡œ í•˜ë©´ ë” ë¹¨ë¦¬ ì‘ì—…ì„ ëë‚¼ ìˆ˜ ìˆì„ ê±° ê°™ë‹¤.  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--success}  


<br><br>
- - -