---
title:  "[Unity ê°•ì˜] ë±€ì„œë¼ì´í¬ ê°•ì˜ - UI "
excerpt: ""

categories:
    - Class VamSurLike
tags:
    - [C#, Unity, VamSurLike]

toc: true
toc_sticky: true
 
date: 2025-03-25 05:00

---
- - -


<br>
- - - 

<!--&nbsp;ğŸ”¹ âœ” âœ…  -->


# 1. UI
âœ” UIë°°ì¹˜, ëª¬ìŠ¤í„° ì²˜ì¹˜ ì‹œ UIë³€ê²½, ê²½í—˜ì¹˜ Slider ë³€ê²½, ë ˆë²¨ì—… ì‹œ Popupí‘œì‹œ  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info}  

## UIì‘ì—… ì‹œ ì²´í¬
âœ” í´ë¦­ ë¬¸ì œ ì‹œ ëª¨ë“  UI Raycast Target í™•ì¸í•´ ë³´ê¸°  
âœ” UI Sort Order ë¬´ì–¸ê°€ ê°€ë ¤ì ¸ìˆì–´ì„œ í´ë¦­ì´ ì•ˆë˜ëŠ”ì§€  
âœ” EventSystem ìœ  ë¬´ í™•ì¸.  
âœ” UI í¬ê¸° ì¡°ì • - UI Scale Mode - Scale With Screen Size  
&nbsp;&nbsp; í™”ë©´í¬ê¸° ë°”ê¾¸ë©´ì„œ í™•ì¸í•´ ë³´ê¸°. - ëŠ˜ì–´ë‚˜ê³  ì¤„ì–´ë“¤ ë•Œ ì˜ ë°°ì¹˜ë˜ë„ë¡ ì„¤ê³„í•˜ê¸°  
âœ” ì½”ë“œë‘ ì—°ë™í–ˆì„ ë•Œ ë¬´ì—‡ì„ ê³ ì³ì•¼ í•˜ë‚˜?  
âœ” UI ì‘ì—…ìì˜ ì˜ë„ í™•ì¸, ê´€ì°°í•˜ê¸°  
âœ” ë‹¤êµ­ì–´ ìƒê°  
âœ” í…ìŠ¤íŠ¸ ë¶€ë¶„ - ì½”ë“œì—ì„œ ìˆ˜ì •í•˜ê²Œ  
âœ” UI Prefab - Script 1:1 ëŒ€ì‘ë˜ë„ë¡ í•˜ë‚˜ì˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ ë‚´ë¶€ ui ê´€ë¦¬  
âœ” í•­ìƒ ì¼œì ¸ ìˆëŠ” UI, Popup UI êµ¬ë¶„  
âœ” POP UP - Stackìœ¼ë¡œ í‚¤ê³  ë„ëŠ” ê´€ë¦¬  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info}  

<br><br><br><br>

# 2. UI ì½”ë“œ
âœ” UIì—ì„œ ê²Œì„ ì¤‘ ë³€í™”ë˜ëŠ” ë¶€ë¶„ í™•ì¸, ì²´í¬   
âœ” ì»´í¬ë„ŒíŠ¸ ì–´ë–¤ ë¶€ë¶„ì„ ë³€ê²½í•´ì•¼ ë°”ë€ŒëŠ”ì§€ í™•ì¸  
âœ” ì½”ë“œì—ì„œ [SerializeField]ë¡œ ê°€ì ¸ì˜¤ê¸°  
âœ” ì»´í¬ë„ŒíŠ¸ ì„¤ì • ë³€ê²½   
âœ” ë²„íŠ¼ - ONClick() ì‚¬ìš©  
âœ” UI ê°±ì‹  - event ì½œë°±ìœ¼ë¡œ  
ğŸ”¹UIManager  UI_Base - UI ê´€ë¦¬   
ğŸ”¹UI_GameScene - ê²Œì„ ê¸°ë³¸ ì •ë³´ë“¤ (Gem, kill)  
ğŸ”¹UI_SkillSelectPopup - ë ˆë²¨ ì—… ì‹œ íŒì—…(ë‹¤ìŒê°•ì˜)  
ğŸ”¹UI_SkillCardItem - ìŠ¤í‚¬ì •ë³´  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info} 

## UIManager
âœ” UIë“¤ì„ ë³´ì—¬ì£¼ê³ , Popup ì„ Stackì„ ì´ìš©í•´ ê´€ë¦¬  
âœ… ShowSceneUI - UI_GameScene(ìœ ì§€ë˜ëŠ”UI ìºë¦­í„° ì •ë³´) ë¥¼ Instantiate.  
âœ… ShowPopup - Popup UI ë³´ì—¬ì¤Œ.  
âœ… ClosePopup - popup ë„ê¸°  
âœ… RefreshTimeScale() - popup ì‹œ ì‹œê°„ ë©ˆì¶¤, ë‹¤ì‹œ ì§„í–‰   
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info} 

<details>
<summary>UIManager</summary>
<div class="notice--primary" markdown="1"> 

```c# 
public class UIManager
{
    UI_Base _sceneUI;

    Stack<UI_Base> _uiStack = new Stack<UI_Base>();

    public T ShowSceneUI<T>() where T : UI_Base 
    {
        if (_sceneUI != null)
            return GetSceneUI<T>();

        string key = typeof(T).Name + ".prefab";
        T ui = Managers.Resource.Instantiate(key, pooling: true).GetOrAddComponent<T>();
        _sceneUI = ui;

        return ui;

    }

    public T GetSceneUI<T>() where T : UI_Base
    {
        return _sceneUI as T;
    }

    public T ShowPopup<T>() where T : UI_Base 
    {
        string key = typeof(T).Name + ".prefab";
        T ui = Managers.Resource.Instantiate(key, pooling: true).GetOrAddComponent<T>();
        _uiStack.Push(ui);
        RefreshTimeScale();

        return ui;
    }

    public void ClosePopup() 
    {
        if (_uiStack.Count == 0)
            return;

        UI_Base ui = _uiStack.Pop();
        Managers.Resource.Destroy(ui.gameObject);
        RefreshTimeScale();
    }

    public void RefreshTimeScale() 
    {
        if (_uiStack.Count > 0)
            Time.timeScale = 0;
        else
            Time.timeScale = 1;
    }
}
```
</div>
</details>


## UI_GameScene
![Image](https://github.com/user-attachments/assets/945e2fd4-62da-4b8e-b5c9-28c0c70e4bc3)  
âœ” uiì—ì„œ ê²Œì„ ì¤‘ ë³€í™”ë˜ëŠ” ë¶€ë¶„ í™•ì¸, ì²´í¬  
âœ” í‚¬ ìˆ˜, GEM Slider ë³€ê²½  
âœ” [SerializeField] ì‚¬ìš©  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info} 

<details>
<summary>UI_GameScene</summary>
<div class="notice--primary" markdown="1"> 

```c# 
public class UI_GameScene : UI_Base
{
    [SerializeField]
    TextMeshProUGUI _killCountText;
    [SerializeField]
    Slider _gemSlider;

    public void SetGemCountRatio(float ratio) 
    {
        _gemSlider.value = ratio;
    }

    public void SetKillCount(int killCount) 
    {
        _killCountText.text = $"{killCount}";
    }
}
```
</div>
</details>

<BR><BR><BR><BR>

# 3. UI ê°±ì‹ (Update) 
âœ” PlayerControllerì—ì„œ Gem ì–»ì„ ë•Œ ë°ì´í„° ë³€ê²½  
âœ” MonsterControllerì—ì„œ Ondead - Kill ìˆ˜ ë³€ê²½  
âœ” UI ê°±ì‹  - event ì½œë°±ìœ¼ë¡œ  
ğŸ”¹GameManager  UIì— ì‚¬ìš©ë  ë°ì´í„° ê´€ë¦¬, Action, Set ì½œë°±ìœ¼ë¡œ ë³€ê²½ë  ë•Œ ì‹¤í–‰
ğŸ”¹GameScene - ì´ë²¤íŠ¸ êµ¬ë…, ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ì‹¤í–‰ í•¨ìˆ˜(Handler)  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info} 

## GameManager
âœ” gem, killCountê´€ë¦¬, ë³€ê²½ ì‹œ ì´ë²¤íŠ¸ë¥¼ ë°œìƒ  
âœ” í”„ë¡œí¼í‹° set ì—ì„œ ì´ë²¤íŠ¸ í˜¸ì¶œ
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info} 

<details>
<summary>GameManager</summary>
<div class="notice--primary" markdown="1"> 

```c# 
public class GameManager
{
    int _gem = 0;

    public event Action<int> OnGemCountChanged;
    public int Gem
    {
        get { return _gem; }
        set
        {
            _gem = value;
            OnGemCountChanged?.Invoke(value);
        }
    }
    #endregion

    #region ì „íˆ¬
    int _killCount;
    public event Action<int> OnkillCountChanged;

    public int KillCount
    {
        get { return _killCount; }
        set 
        {
            _killCount = value; OnkillCountChanged?.Invoke(value); 
        }
    }
    #endregion
}
```
</div>
</details>

## GameScene
âœ” UI_GameScenet ìƒì„±    
âœ” í‚¬ ìˆ˜, ì ¬ ì´ë²¤íŠ¸ êµ¬ë…  
âœ” ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ì‹¤í–‰ í•¨ìˆ˜(Handler)  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info} 

<details>
<summary>GameScene</summary>
<div class="notice--primary" markdown="1"> 

```c# 
public class GameScene : MonoBehaviour
{

    void StartLoaded()
    {
        Managers.UI.ShowSceneUI<UI_GameScene>();

        Managers.Game.OnkillCountChanged -= HandleOnkillCountChanged;
        Managers.Game.OnkillCountChanged += HandleOnkillCountChanged;
        Managers.Game.OnGemCountChanged -= HandleOnGemCountChanged;
        Managers.Game.OnGemCountChanged += HandleOnGemCountChanged;
    }

    int _collectedGemCount = 0;
    int _remainingTotalGemCount = 10;
    public void HandleOnGemCountChanged(int gemCount) 
    {
        _collectedGemCount++;

        if (_collectedGemCount == _remainingTotalGemCount)
        {
            Managers.UI.ShowPopup<UI_SkillSelectPopup>();
            _collectedGemCount = 0;
            _remainingTotalGemCount *= 2; 
        }

        Managers.UI.GetSceneUI<UI_GameScene>().SetGemCountRatio((float)_collectedGemCount / _remainingTotalGemCount);
    }

    public void HandleOnkillCountChanged(int killCount)
    {
        Managers.UI.GetSceneUI<UI_GameScene>().SetKillCount(killCount);

        if (killCount==5)
        {
            //ë³´ìŠ¤? ì»¨í…ì¸ 
        }
    }
    private void OnDestroy()
    {
        if (Managers.Game != null)
        {
            Managers.Game.OnGemCountChanged -= HandleOnGemCountChanged;
            Managers.Game.OnGemCountChanged -= HandleOnGemCountChanged;
        }
            
    }
}
```
</div>
</details>

## Player, Monster
âœ” ë°ì´í„° ë³€ê²½ ì‹œì   
âœ… PlayerController -  CollectEnv() - Managers.Game.Gem += 1;  
âœ… MonsterController - OnDead() - Managers.Game.KillCount++;  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--info} 

<details>
<summary>P,M Controller</summary>
<div class="notice--primary" markdown="1"> 

```c# 
public class PlayerController : CreatureController
{
    void CollectEnv() 
    {
        float sqrCollectDis = EnvCollectDist * EnvCollectDist;

        var findGems = GameObject.Find("@Grid").GetComponent<GridController>().GatherObjects(transform.position, EnvCollectDist + 0.4f);

        foreach (var go in findGems)
        {
            GemController gem = go.GetComponent<GemController>();

            Vector3 dir = gem.transform.position - transform.position;
            if (dir.sqrMagnitude <= EnvCollectDist)
            {
                //âœ… 
                Managers.Game.Gem += 1;
                Managers.Object.Despawn(gem);
            }   
        }
    }
}


public class MonsterController : CreatureController
{
    protected override void OnDead()
    {
        base.OnDead();

        //âœ…
        Managers.Game.KillCount++;

        if (_coDotDamage != null)
            StopCoroutine(_coDotDamage);
        _coDotDamage = null;

        //ì£½ì„ ë•Œ ë³´ì„ ìŠ¤í°
        GemController gc = Managers.Object.Spawn<GemController>(transform.position);

        Managers.Object.Despawn(this);
    }
}
```
</div>
</details>

<br><br><br><br>

# ì´ê²ƒì €ê²ƒ ë©”ëª¨

## UI - Data
UI ì½”ë“œì—ì„œ ë°ì´í„°ë¥¼ ë„£ì§€ ë§ì. ë°ì´í„°ë‘ UI ë¶„ë¦¬í•˜ê¸°.  
ì§€ê¸ˆ í”„ë¡œì íŠ¸ì—ì„  GameManagerì—ì„œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ì§€ë§Œ  
UIì—ì„œ ì“°ëŠ” ë°ì´í„°ë¥¼ ë”°ë¡œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ê´€ë¦¬í•  ìˆ˜ë„ ìˆë‹¤. UI-Data 1:1  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice} 

## popupì‹œ ì‹œê°„ì •ì§€
RefreshTimeScale()  
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice} 

## UIê°±ì‹  íë¦„ ì •ë¦¬
1.&nbsp;Player,MonsterControllerì—ì„œ GameManagerì˜ ë°ì´í„° ë³€ê²½ ì‹œë„.  
2.&nbsp;GameManager - ë°ì´í„°ì˜ set ë¶€ë¶„ì˜ êµ¬ë…ëœ ì´ë²¤íŠ¸ë“¤ í˜¸ì¶œ  
3.&nbsp;GameSceneì—ì„œ ë¯¸ë¦¬ êµ¬ë…ëœ Handlerì˜ ì‹¤í–‰  
4.&nbsp;ë°ì´í„°ì— ë§ê²Œ UI ë³€ê²½   
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice} 

<br><br><br>
- - - 

# ì¡ë‹´, ì¼ê¸°?
í° ê·œëª¨ì˜ UI - ë‹¤ë¥¸ ë°©ë²•, ì‹¤ìˆ˜ë¥¼ ì¤„ì´ëŠ” ë°©ë²• ì•Œì•„ë³´ê¸°.  
ë‹¤ìŒ ì‹œê°„ - ë ˆë²¨ ì—… íŒì—… ìˆ˜ì •   
{:style="border:1px solid #EAEAEA; border-radius: 7px;"}
{: .notice--success}  


<br><br>
- - -